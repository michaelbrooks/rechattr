$def with (user, poll, stream, stats, newest_item, oldest_item, lastQuestion=None, responses=dict())
$var css: poll.css
$var js_app: poll
$var nav: $:elements.nav('poll', user)
$var poll: $poll.poll_url_code
$var header: $:elements.comment_box(user, poll)
$var current_time: ${ dtutils.dt_timestamp(newest_item.get_time()) if newest_item else time.time()}
$var end_of_stream: ${ dtutils.dt_timestamp(oldest_item.get_time()) if oldest_item > 0 else time.time()}
<div class="stream-page">
    <div class="left-column">
        <div class="left-content poll-info">
            <div class="poll-title">
                $:elements.poll_status(poll)
                $poll.title
            </div>
            <div class="poll-timing muted">
                $poll.nice_local_interval()
            </div>

            <div class="poll-user muted">
                created by <b>@${poll.user.username}</b>
            </div>

            <div class="poll-hashtag muted" title="Tweets with this hashtag will be aggregated by re:chattr">
                monitoring <b>${poll.twitter_hashtag}</b>
            </div>
        </div>
    </div>
    <div class="right-column">
        <div class="right-content">
            <div class="stream-header">
            </div>
            <div class="stream">
                <div class="stream-list">
                    $if lastQuestion:
                        <div class="stream-item">
                        $:render_stream_item(lastQuestion, responses=responses)
                        </div>

                    $for item in stream:
                    <div class="stream-item">
                        $:render_stream_item(item, responses=responses)
                    </div>
                </div>
            </div>
            <div class="stream-footer muted clickable">
                <span class="static-spinner hide"></span>Load more
            </div>
        </div>
    </div>
</div>
